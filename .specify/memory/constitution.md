<!--
Sync Impact Report:
- Version change: 2.1.1 -> 3.0.0
- Modified principles:
  - [PRINCIPLE_1_NAME] -> Spec-driven development only
  - [PRINCIPLE_2_NAME] -> No manual code writing
  - [PRINCIPLE_3_NAME] -> Stateless server architecture
  - [PRINCIPLE_4_NAME] -> Database is the single source of truth
  - [PRINCIPLE_5_NAME] -> Tools must be deterministic and idempotent
- Added sections:
  - Architecture Rules
  - Behavior Rules
  - Security Rules
  - Judging Criteria
  - Disallowed
- Removed sections:
  - [SECTION_2_NAME]
  - [SECTION_3_NAME]
- Templates requiring updates:
  - ✅ .specify/templates/plan-template.md
  - ✅ .specify/templates/spec-template.md
  - ✅ .specify/templates/tasks-template.md
- Follow-up TODOs: None
-->
# Todo Application Constitution

## Core Principles

### I. Spec-Driven Development Only
Every feature, enhancement, or bug fix must begin with a formal specification. This specification must be reviewed and approved before any implementation begins.

### II. No Manual Code Writing
All code must be generated by AI agents based on the approved specifications. Manual code edits are strictly prohibited to ensure consistency and adherence to the spec.

### III. Stateless Server Architecture
The backend must be designed as a stateless application. All state must be managed by the client or stored in the database.

### IV. Database is the Single Source of Truth
The database is the only authoritative source for all application data. No application state should be stored in memory or on the filesystem.

### V. Tools Must Be Deterministic and Idempotent
All tools and scripts must produce the same output for the same input and must be safely executable multiple times without changing the result beyond the initial application.

## Architecture Rules
- FastAPI handles HTTP requests and responses only. All business logic should be delegated to other services.
- The OpenAI Agents SDK is responsible for all reasoning, natural language processing, and tool selection.

## Behavior Rules
- The AI agent must confirm all successful actions with a clear and concise message.
- All errors must be handled gracefully. The agent must provide a clear explanation of the error and, if possible, suggest a solution.
- The agent must not "hallucinate" or invent task data. All data must be retrieved from the single source of truth (the database).
- All tool usage must be logged and returned in the response for auditability.

## Security Rules
- All database operations and API endpoints must be scoped by `user_id` to prevent data leakage between users.
- Authentication must be handled by the Better Auth library, using JWTs.
- There must be no cross-user data leakage.

## Judging Criteria
- Correct and efficient use of the OpenAI Agents SDK for reasoning and tool use.
- A clean, stateless request-response cycle in the backend.
- Accurate mapping of natural language queries to the appropriate tools and parameters.
- A clear separation of concerns between the HTTP layer, the reasoning layer, and the data layer.

## Disallowed
- Manual code edits of any kind.
- Skipping any of the Spec-Kit steps (spec, plan, tasks).
- Placing any business logic inside the frontend application.

## Governance
This constitution supersedes all other practices and conventions. All changes to the project must adhere to the principles and rules outlined in this document. Amendments to this constitution require a formal proposal, review, and approval process.

**Version**: 3.0.0 | **Ratified**: 2026-02-07 | **Last Amended**: 2026-02-07