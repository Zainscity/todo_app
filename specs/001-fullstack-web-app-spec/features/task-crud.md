# Task CRUD Operations

## User Stories for Task Operations

### Create Task (Priority: P1)
As an authenticated user, I want to create new tasks so that I can track my responsibilities and to-dos.
- **Acceptance Criteria**: User can submit task title and optional description, task is saved to their personal list with default incomplete status

### View/List Tasks (Priority: P1)
As an authenticated user, I want to view all my tasks so that I can see what needs to be done.
- **Acceptance Criteria**: All tasks assigned to the user are displayed with their titles, descriptions, and completion status

### Update Task (Priority: P2)
As an authenticated user, I want to update my tasks so that I can modify details as needed.
- **Acceptance Criteria**: User can modify task title and description, changes are persisted to the database

### Delete Task (Priority: P2)
As an authenticated user, I want to delete tasks so that I can remove completed or irrelevant items.
- **Acceptance Criteria**: User can remove tasks from their list, deletion is permanent and confirmed

### Mark Task Complete/Incomplete (Priority: P1)
As an authenticated user, I want to mark tasks as complete/incomplete so that I can track my progress.
- **Acceptance Criteria**: User can toggle task completion status, change is reflected in the UI and persisted to database

## Acceptance Criteria for Each Operation

### Create Task
- **Validations**: Title is required (1-100 characters), description optional (max 500 characters)
- **Response**: Returns created task object with ID and timestamps
- **Error Handling**: Returns 400 for invalid input, 401 for unauthenticated users
- **Access Control**: Only authenticated users can create tasks

### View/List Tasks
- **Response**: Returns array of user's tasks with all properties
- **Pagination**: Results may be paginated for large datasets
- **Error Handling**: Returns 401 for unauthenticated users
- **Performance**: Response time under 2 seconds for up to 1000 tasks

### Update Task
- **Validations**: Title must be 1-100 characters if provided, description max 500 characters if provided
- **Response**: Returns updated task object
- **Error Handling**: Returns 400 for invalid input, 401 for unauthenticated users, 404 if task doesn't exist
- **Access Control**: Users can only update their own tasks

### Delete Task
- **Response**: Returns success confirmation
- **Error Handling**: Returns 401 for unauthenticated users, 404 if task doesn't exist
- **Access Control**: Users can only delete their own tasks
- **Data Integrity**: Related data is handled appropriately (cascade delete if applicable)

### Mark Task Complete/Incomplete
- **Response**: Returns updated task with new completion status
- **Error Handling**: Returns 400 for invalid status, 401 for unauthenticated users, 404 if task doesn't exist
- **Access Control**: Users can only update completion status of their own tasks

## User Isolation Rules

- **Task Ownership**: Each task belongs to exactly one user via foreign key relationship
- **Access Restriction**: Users can only access, modify, or delete their own tasks
- **Visibility Control**: Tasks are filtered by user ID in all queries
- **Authorization Checks**: Backend validates user ownership before each operation
- **API Security**: User ID in URL path must match authenticated user's ID

## Validation Rules

### Title Validation
- Required field
- Length: 1-100 characters
- No HTML or script tags allowed
- Trimmed of leading/trailing whitespace

### Description Validation
- Optional field
- Length: maximum 500 characters
- HTML sanitization required if rich text is allowed
- Trimmed of leading/trailing whitespace

### User Validation
- User must be authenticated for all operations
- User must exist in the system
- User must have active, non-suspended account

### Data Integrity Validation
- All timestamps are automatically generated by the system
- User ID cannot be modified after creation
- Task ID is auto-generated and immutable